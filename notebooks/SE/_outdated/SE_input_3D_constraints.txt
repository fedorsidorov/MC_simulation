define vertex attribute vmob real

MOBILITY_TENSOR 
vmob  0     0
0     vmob  0
0     0  vmob

PARAMETER cnt = 0
PARAMETER lx = 10
PARAMETER ly = 10
PARAMETER angle_surface = 55
PARAMETER TENS_r = 33.5e-2
PARAMETER TENS_s = -TENS_r*cos((angle_surface)*pi/180)
PARAMETER TENS_m = 0

/*--------------------CONSTRAINTS START--------------------*/
constraint 1
formula: z = 0

constraint 11
formula: x = -lx/2

constraint 22
formula: y = -ly/2

constraint 33
formula: x = lx/2

constraint 44
formula: y = ly/2

/*--------------------CONSTRAINTS END--------------------*/

/*--------------------VERTICES START--------------------*/
vertices
1	-5. -5.  0.
2	-5. -4.  0.
3	-5. -3.  0.
4	-5. -2.  0.
5	-5. -1.  0.
6	-5.  0.  0.
7	-5.  1.  0.
8	-5.  2.  0.
9	-5.  3.  0.
10	-5.  4.  0.
11	-5.  5.  0.
12	-4. -5.  0.
13	-4. -4.  0.
14	-4. -3.  0.
15	-4. -2.  0.
16	-4. -1.  0.
17	-4.  0.  0.
18	-4.  1.  0.
19	-4.  2.  0.
20	-4.  3.  0.
21	-4.  4.  0.
22	-4.  5.  0.
23	-3. -5.  0.
24	-3. -4.  0.
25	-3. -3.  0.
26	-3. -2.  0.
27	-3. -1.  0.
28	-3.  0.  0.
29	-3.  1.  0.
30	-3.  2.  0.
31	-3.  3.  0.
32	-3.  4.  0.
33	-3.  5.  0.
34	-2. -5.  0.
35	-2. -4.  0.
36	-2. -3.  0.
37	-2. -2.  0.
38	-2. -1.  0.
39	-2.  0.  0.
40	-2.  1.  0.
41	-2.  2.  0.
42	-2.  3.  0.
43	-2.  4.  0.
44	-2.  5.  0.
45	-1. -5.  0.
46	-1. -4.  0.
47	-1. -3.  0.
48	-1. -2.  0.
49	-1. -1.  0.
50	-1.  0.  0.
51	-1.  1.  0.
52	-1.  2.  0.
53	-1.  3.  0.
54	-1.  4.  0.
55	-1.  5.  0.
56	 0. -5.  0.
57	 0. -4.  0.
58	 0. -3.  0.
59	 0. -2.  0.
60	 0. -1.  0.
61	0. 0. 0.
62	0. 1. 0.
63	0. 2. 0.
64	0. 3. 0.
65	0. 4. 0.
66	0. 5. 0.
67	 1. -5.  0.
68	 1. -4.  0.
69	 1. -3.  0.
70	 1. -2.  0.
71	 1. -1.  0.
72	1. 0. 0.
73	1. 1. 0.
74	1. 2. 0.
75	1. 3. 0.
76	1. 4. 0.
77	1. 5. 0.
78	 2. -5.  0.
79	 2. -4.  0.
80	 2. -3.  0.
81	 2. -2.  0.
82	 2. -1.  0.
83	2. 0. 0.
84	2. 1. 0.
85	2. 2. 0.
86	2. 3. 0.
87	2. 4. 0.
88	2. 5. 0.
89	 3. -5.  0.
90	 3. -4.  0.
91	 3. -3.  0.
92	 3. -2.  0.
93	 3. -1.  0.
94	3. 0. 0.
95	3. 1. 0.
96	3. 2. 0.
97	3. 3. 0.
98	3. 4. 0.
99	3. 5. 0.
100	 4. -5.  0.
101	 4. -4.  0.
102	 4. -3.  0.
103	 4. -2.  0.
104	 4. -1.  0.
105	4. 0. 0.
106	4. 1. 0.
107	4. 2. 0.
108	4. 3. 0.
109	4. 4. 0.
110	4. 5. 0.
111	 5. -5.  0.
112	 5. -4.  0.
113	 5. -3.  0.
114	 5. -2.  0.
115	 5. -1.  0.
116	5. 0. 0.
117	5. 1. 0.
118	5. 2. 0.
119	5. 3. 0.
120	5. 4. 0.
121	5. 5. 0.
122	-5.         -5.          1.98913591
123	-5.         -4.          2.11752792
124	-5.         -3.          2.11879687
125	-5.         -2.          1.87238881
126	-5.         -1.          1.73866265
127	-5.  0.  2.
128	-5.          1.          2.26133735
129	-5.          2.          2.12761119
130	-5.          3.          1.88120313
131	-5.          4.          1.88247208
132	-5.          5.          2.01086409
133	-4.         -5.          2.11752792
134	-4.         -4.          1.94187332
135	-4.         -3.          1.84626929
136	-4.         -2.          2.36396456
137	-4.         -1.          1.67653131
138	-4.  0.  2.
139	-4.          1.          2.32346869
140	-4.          2.          1.63603544
141	-4.          3.          2.15373071
142	-4.          4.          2.05812668
143	-4.          5.          1.88247208
144	-3.         -5.          2.11879687
145	-3.         -4.          1.84626929
146	-3.         -3.          2.16755487
147	-3.         -2.          1.85413232
148	-3.         -1.          2.08559361
149	-3.  0.  2.
150	-3.          1.          1.91440639
151	-3.          2.          2.14586768
152	-3.          3.          1.83244513
153	-3.          4.          2.15373071
154	-3.          5.          1.88120313
155	-2.         -5.          1.87238881
156	-2.         -4.          2.36396456
157	-2.         -3.          1.85413232
158	-2.         -2.          1.49270012
159	-2.         -1.          2.70816155
160	-2.  0.  2.
161	-2.          1.          1.29183845
162	-2.          2.          2.50729988
163	-2.          3.          2.14586768
164	-2.          4.          1.63603544
165	-2.          5.          2.12761119
166	-1.         -5.          1.73866265
167	-1.         -4.          1.67653131
168	-1.         -3.          2.08559361
169	-1.         -2.          2.70816155
170	-1.         -1.          2.76139443
171	-1.  0.  2.
172	-1.          1.          1.23860557
173	-1.          2.          1.29183845
174	-1.          3.          1.91440639
175	-1.          4.          2.32346869
176	-1.          5.          2.26133735
177	 0. -5.  2.
178	 0. -4.  2.
179	 0. -3.  2.
180	 0. -2.  2.
181	 0. -1.  2.
182	0. 0. 2.
183	0. 1. 2.
184	0. 2. 2.
185	0. 3. 2.
186	0. 4. 2.
187	0. 5. 2.
188	 1.         -5.          2.26133735
189	 1.         -4.          2.32346869
190	 1.         -3.          1.91440639
191	 1.         -2.          1.29183845
192	 1.         -1.          1.23860557
193	1. 0. 2.
194	1.         1.         2.76139443
195	1.         2.         2.70816155
196	1.         3.         2.08559361
197	1.         4.         1.67653131
198	1.         5.         1.73866265
199	 2.         -5.          2.12761119
200	 2.         -4.          1.63603544
201	 2.         -3.          2.14586768
202	 2.         -2.          2.50729988
203	 2.         -1.          1.29183845
204	2. 0. 2.
205	2.         1.         2.70816155
206	2.         2.         1.49270012
207	2.         3.         1.85413232
208	2.         4.         2.36396456
209	2.         5.         1.87238881
210	 3.         -5.          1.88120313
211	 3.         -4.          2.15373071
212	 3.         -3.          1.83244513
213	 3.         -2.          2.14586768
214	 3.         -1.          1.91440639
215	3. 0. 2.
216	3.         1.         2.08559361
217	3.         2.         1.85413232
218	3.         3.         2.16755487
219	3.         4.         1.84626929
220	3.         5.         2.11879687
221	 4.         -5.          1.88247208
222	 4.         -4.          2.05812668
223	 4.         -3.          2.15373071
224	 4.         -2.          1.63603544
225	 4.         -1.          2.32346869
226	4. 0. 2.
227	4.         1.         1.67653131
228	4.         2.         2.36396456
229	4.         3.         1.84626929
230	4.         4.         1.94187332
231	4.         5.         2.11752792
232	 5.         -5.          2.01086409
233	 5.         -4.          1.88247208
234	 5.         -3.          1.88120313
235	 5.         -2.          2.12761119
236	 5.         -1.          2.26133735
237	5. 0. 2.
238	5.         1.         1.73866265
239	5.         2.         1.87238881
240	5.         3.         2.11879687
241	5.         4.         2.11752792
242	5.         5.         1.98913591
/*--------------------VERTICES END--------------------*/

/*--------------------EDGES START--------------------*/
edges
1	 1 12
2	 2 13
3	 3 14
4	 4 15
5	 5 16
6	 6 17
7	 7 18
8	 8 19
9	 9 20
10	10 21
11	11 22
12	12 23
13	13 24
14	14 25
15	15 26
16	16 27
17	17 28
18	18 29
19	19 30
20	20 31
21	21 32
22	22 33
23	23 34
24	24 35
25	25 36
26	26 37
27	27 38
28	28 39
29	29 40
30	30 41
31	31 42
32	32 43
33	33 44
34	34 45
35	35 46
36	36 47
37	37 48
38	38 49
39	39 50
40	40 51
41	41 52
42	42 53
43	43 54
44	44 55
45	45 56
46	46 57
47	47 58
48	48 59
49	49 60
50	50 61
51	51 62
52	52 63
53	53 64
54	54 65
55	55 66
56	56 67
57	57 68
58	58 69
59	59 70
60	60 71
61	61 72
62	62 73
63	63 74
64	64 75
65	65 76
66	66 77
67	67 78
68	68 79
69	69 80
70	70 81
71	71 82
72	72 83
73	73 84
74	74 85
75	75 86
76	76 87
77	77 88
78	78 89
79	79 90
80	80 91
81	81 92
82	82 93
83	83 94
84	84 95
85	85 96
86	86 97
87	87 98
88	88 99
89	 89 100
90	 90 101
91	 91 102
92	 92 103
93	 93 104
94	 94 105
95	 95 106
96	 96 107
97	 97 108
98	 98 109
99	 99 110
100	100 111
101	101 112
102	102 113
103	103 114
104	104 115
105	105 116
106	106 117
107	107 118
108	108 119
109	109 120
110	110 121
111	1 2
112	2 3
113	3 4
114	4 5
115	5 6
116	6 7
117	7 8
118	8 9
119	 9 10
120	10 11
121	12 13
122	13 14
123	14 15
124	15 16
125	16 17
126	17 18
127	18 19
128	19 20
129	20 21
130	21 22
131	23 24
132	24 25
133	25 26
134	26 27
135	27 28
136	28 29
137	29 30
138	30 31
139	31 32
140	32 33
141	34 35
142	35 36
143	36 37
144	37 38
145	38 39
146	39 40
147	40 41
148	41 42
149	42 43
150	43 44
151	45 46
152	46 47
153	47 48
154	48 49
155	49 50
156	50 51
157	51 52
158	52 53
159	53 54
160	54 55
161	56 57
162	57 58
163	58 59
164	59 60
165	60 61
166	61 62
167	62 63
168	63 64
169	64 65
170	65 66
171	67 68
172	68 69
173	69 70
174	70 71
175	71 72
176	72 73
177	73 74
178	74 75
179	75 76
180	76 77
181	78 79
182	79 80
183	80 81
184	81 82
185	82 83
186	83 84
187	84 85
188	85 86
189	86 87
190	87 88
191	89 90
192	90 91
193	91 92
194	92 93
195	93 94
196	94 95
197	95 96
198	96 97
199	97 98
200	98 99
201	100 101
202	101 102
203	102 103
204	103 104
205	104 105
206	105 106
207	106 107
208	107 108
209	108 109
210	109 110
211	111 112
212	112 113
213	113 114
214	114 115
215	115 116
216	116 117
217	117 118
218	118 119
219	119 120
220	120 121
221	122 133
222	123 134
223	124 135
224	125 136
225	126 137
226	127 138
227	128 139
228	129 140
229	130 141
230	131 142
231	132 143
232	133 144
233	134 145
234	135 146
235	136 147
236	137 148
237	138 149
238	139 150
239	140 151
240	141 152
241	142 153
242	143 154
243	144 155
244	145 156
245	146 157
246	147 158
247	148 159
248	149 160
249	150 161
250	151 162
251	152 163
252	153 164
253	154 165
254	155 166
255	156 167
256	157 168
257	158 169
258	159 170
259	160 171
260	161 172
261	162 173
262	163 174
263	164 175
264	165 176
265	166 177
266	167 178
267	168 179
268	169 180
269	170 181
270	171 182
271	172 183
272	173 184
273	174 185
274	175 186
275	176 187
276	177 188
277	178 189
278	179 190
279	180 191
280	181 192
281	182 193
282	183 194
283	184 195
284	185 196
285	186 197
286	187 198
287	188 199
288	189 200
289	190 201
290	191 202
291	192 203
292	193 204
293	194 205
294	195 206
295	196 207
296	197 208
297	198 209
298	199 210
299	200 211
300	201 212
301	202 213
302	203 214
303	204 215
304	205 216
305	206 217
306	207 218
307	208 219
308	209 220
309	210 221
310	211 222
311	212 223
312	213 224
313	214 225
314	215 226
315	216 227
316	217 228
317	218 229
318	219 230
319	220 231
320	221 232
321	222 233
322	223 234
323	224 235
324	225 236
325	226 237
326	227 238
327	228 239
328	229 240
329	230 241
330	231 242
331	122 123
332	123 124
333	124 125
334	125 126
335	126 127
336	127 128
337	128 129
338	129 130
339	130 131
340	131 132
341	133 134
342	134 135
343	135 136
344	136 137
345	137 138
346	138 139
347	139 140
348	140 141
349	141 142
350	142 143
351	144 145
352	145 146
353	146 147
354	147 148
355	148 149
356	149 150
357	150 151
358	151 152
359	152 153
360	153 154
361	155 156
362	156 157
363	157 158
364	158 159
365	159 160
366	160 161
367	161 162
368	162 163
369	163 164
370	164 165
371	166 167
372	167 168
373	168 169
374	169 170
375	170 171
376	171 172
377	172 173
378	173 174
379	174 175
380	175 176
381	177 178
382	178 179
383	179 180
384	180 181
385	181 182
386	182 183
387	183 184
388	184 185
389	185 186
390	186 187
391	188 189
392	189 190
393	190 191
394	191 192
395	192 193
396	193 194
397	194 195
398	195 196
399	196 197
400	197 198
401	199 200
402	200 201
403	201 202
404	202 203
405	203 204
406	204 205
407	205 206
408	206 207
409	207 208
410	208 209
411	210 211
412	211 212
413	212 213
414	213 214
415	214 215
416	215 216
417	216 217
418	217 218
419	218 219
420	219 220
421	221 222
422	222 223
423	223 224
424	224 225
425	225 226
426	226 227
427	227 228
428	228 229
429	229 230
430	230 231
431	232 233
432	233 234
433	234 235
434	235 236
435	236 237
436	237 238
437	238 239
438	239 240
439	240 241
440	241 242
441	  1 122
442	  2 123
443	  3 124
444	  4 125
445	  5 126
446	  6 127
447	  7 128
448	  8 129
449	  9 130
450	 10 131
451	 11 132
452	 12 133
453	 22 143
454	 23 144
455	 33 154
456	 34 155
457	 44 165
458	 45 166
459	 55 176
460	 56 177
461	 66 187
462	 67 188
463	 77 198
464	 78 199
465	 88 209
466	 89 210
467	 99 220
468	100 221
469	110 231
470	111 232
471	112 233
472	113 234
473	114 235
474	115 236
475	116 237
476	117 238
477	118 239
478	119 240
479	120 241
480	121 242
/*--------------------EDGES END--------------------*/

/*--------------------FACES START--------------------*/
faces
1	 111    2 -121   -1
2	 112    3 -122   -2
3	 113    4 -123   -3
4	 114    5 -124   -4
5	 115    6 -125   -5
6	 116    7 -126   -6
7	 117    8 -127   -7
8	 118    9 -128   -8
9	 119   10 -129   -9
10	 120   11 -130  -10
11	 121   13 -131  -12
12	 122   14 -132  -13
13	 123   15 -133  -14
14	 124   16 -134  -15
15	 125   17 -135  -16
16	 126   18 -136  -17
17	 127   19 -137  -18
18	 128   20 -138  -19
19	 129   21 -139  -20
20	 130   22 -140  -21
21	 131   24 -141  -23
22	 132   25 -142  -24
23	 133   26 -143  -25
24	 134   27 -144  -26
25	 135   28 -145  -27
26	 136   29 -146  -28
27	 137   30 -147  -29
28	 138   31 -148  -30
29	 139   32 -149  -31
30	 140   33 -150  -32
31	 141   35 -151  -34
32	 142   36 -152  -35
33	 143   37 -153  -36
34	 144   38 -154  -37
35	 145   39 -155  -38
36	 146   40 -156  -39
37	 147   41 -157  -40
38	 148   42 -158  -41
39	 149   43 -159  -42
40	 150   44 -160  -43
41	 151   46 -161  -45
42	 152   47 -162  -46
43	 153   48 -163  -47
44	 154   49 -164  -48
45	 155   50 -165  -49
46	 156   51 -166  -50
47	 157   52 -167  -51
48	 158   53 -168  -52
49	 159   54 -169  -53
50	 160   55 -170  -54
51	 161   57 -171  -56
52	 162   58 -172  -57
53	 163   59 -173  -58
54	 164   60 -174  -59
55	 165   61 -175  -60
56	 166   62 -176  -61
57	 167   63 -177  -62
58	 168   64 -178  -63
59	 169   65 -179  -64
60	 170   66 -180  -65
61	 171   68 -181  -67
62	 172   69 -182  -68
63	 173   70 -183  -69
64	 174   71 -184  -70
65	 175   72 -185  -71
66	 176   73 -186  -72
67	 177   74 -187  -73
68	 178   75 -188  -74
69	 179   76 -189  -75
70	 180   77 -190  -76
71	 181   79 -191  -78
72	 182   80 -192  -79
73	 183   81 -193  -80
74	 184   82 -194  -81
75	 185   83 -195  -82
76	 186   84 -196  -83
77	 187   85 -197  -84
78	 188   86 -198  -85
79	 189   87 -199  -86
80	 190   88 -200  -87
81	 191   90 -201  -89
82	 192   91 -202  -90
83	 193   92 -203  -91
84	 194   93 -204  -92
85	 195   94 -205  -93
86	 196   95 -206  -94
87	 197   96 -207  -95
88	 198   97 -208  -96
89	 199   98 -209  -97
90	 200   99 -210  -98
91	 201  101 -211 -100
92	 202  102 -212 -101
93	 203  103 -213 -102
94	 204  104 -214 -103
95	 205  105 -215 -104
96	 206  106 -216 -105
97	 207  107 -217 -106
98	 208  108 -218 -107
99	 209  109 -219 -108
100	 210  110 -220 -109
101	 221  341 -222 -331
102	 222  342 -223 -332
103	 223  343 -224 -333
104	 224  344 -225 -334
105	 225  345 -226 -335
106	 226  346 -227 -336
107	 227  347 -228 -337
108	 228  348 -229 -338
109	 229  349 -230 -339
110	 230  350 -231 -340
111	 232  351 -233 -341
112	 233  352 -234 -342
113	 234  353 -235 -343
114	 235  354 -236 -344
115	 236  355 -237 -345
116	 237  356 -238 -346
117	 238  357 -239 -347
118	 239  358 -240 -348
119	 240  359 -241 -349
120	 241  360 -242 -350
121	 243  361 -244 -351
122	 244  362 -245 -352
123	 245  363 -246 -353
124	 246  364 -247 -354
125	 247  365 -248 -355
126	 248  366 -249 -356
127	 249  367 -250 -357
128	 250  368 -251 -358
129	 251  369 -252 -359
130	 252  370 -253 -360
131	 254  371 -255 -361
132	 255  372 -256 -362
133	 256  373 -257 -363
134	 257  374 -258 -364
135	 258  375 -259 -365
136	 259  376 -260 -366
137	 260  377 -261 -367
138	 261  378 -262 -368
139	 262  379 -263 -369
140	 263  380 -264 -370
141	 265  381 -266 -371
142	 266  382 -267 -372
143	 267  383 -268 -373
144	 268  384 -269 -374
145	 269  385 -270 -375
146	 270  386 -271 -376
147	 271  387 -272 -377
148	 272  388 -273 -378
149	 273  389 -274 -379
150	 274  390 -275 -380
151	 276  391 -277 -381
152	 277  392 -278 -382
153	 278  393 -279 -383
154	 279  394 -280 -384
155	 280  395 -281 -385
156	 281  396 -282 -386
157	 282  397 -283 -387
158	 283  398 -284 -388
159	 284  399 -285 -389
160	 285  400 -286 -390
161	 287  401 -288 -391
162	 288  402 -289 -392
163	 289  403 -290 -393
164	 290  404 -291 -394
165	 291  405 -292 -395
166	 292  406 -293 -396
167	 293  407 -294 -397
168	 294  408 -295 -398
169	 295  409 -296 -399
170	 296  410 -297 -400
171	 298  411 -299 -401
172	 299  412 -300 -402
173	 300  413 -301 -403
174	 301  414 -302 -404
175	 302  415 -303 -405
176	 303  416 -304 -406
177	 304  417 -305 -407
178	 305  418 -306 -408
179	 306  419 -307 -409
180	 307  420 -308 -410
181	 309  421 -310 -411
182	 310  422 -311 -412
183	 311  423 -312 -413
184	 312  424 -313 -414
185	 313  425 -314 -415
186	 314  426 -315 -416
187	 315  427 -316 -417
188	 316  428 -317 -418
189	 317  429 -318 -419
190	 318  430 -319 -420
191	 320  431 -321 -421
192	 321  432 -322 -422
193	 322  433 -323 -423
194	 323  434 -324 -424
195	 324  435 -325 -425
196	 325  436 -326 -426
197	 326  437 -327 -427
198	 327  438 -328 -428
199	 328  439 -329 -429
200	 329  440 -330 -430
201	   1  452 -221 -441
202	  12  454 -232 -452
203	  23  456 -243 -454
204	  34  458 -254 -456
205	  45  460 -265 -458
206	  56  462 -276 -460
207	  67  464 -287 -462
208	  78  466 -298 -464
209	  89  468 -309 -466
210	 100  470 -320 -468
211	 451  231 -453  -11
212	 453  242 -455  -22
213	 455  253 -457  -33
214	 457  264 -459  -44
215	 459  275 -461  -55
216	 461  286 -463  -66
217	 463  297 -465  -77
218	 465  308 -467  -88
219	 467  319 -469  -99
220	 469  330 -480 -110
221	 441  331 -442 -111
222	 442  332 -443 -112
223	 443  333 -444 -113
224	 444  334 -445 -114
225	 445  335 -446 -115
226	 446  336 -447 -116
227	 447  337 -448 -117
228	 448  338 -449 -118
229	 449  339 -450 -119
230	 450  340 -451 -120
231	 211  471 -431 -470
232	 212  472 -432 -471
233	 213  473 -433 -472
234	 214  474 -434 -473
235	 215  475 -435 -474
236	 216  476 -436 -475
237	 217  477 -437 -476
238	 218  478 -438 -477
239	 219  479 -439 -478
240	 220  480 -440 -479
/*--------------------FACES END--------------------*/

/*--------------------BODIES START--------------------*/
bodies
1	1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 
/*--------------------BODIES END--------------------*/

/*--------------------SIMULATION START--------------------*/
read

defmob_1 := {foreach vertex vv do {set vv vmob 1}}

loopit := {g50; w 0.0005; w 0.0005; V}

set_v_constraint_1 := {
	foreach vertex vv do {if vv.z == 0 then set vv constraint 1}
	}

set_v_constraints_11_33 := {
	foreach vertex vv do {
		if vv.x = -lx/2 then set vv constraint 11;
		if vv.x = lx/2 then set vv constraint 33;
		}
	}

set_v_constraints_22_44 := {
	foreach vertex vv do {
		if vv.y = -ly/2 then set vv constraint 22;
		if vv.y = ly/2 then set vv constraint 44;
		}
	}

set_e_constraint_1 := {
	foreach edge ee do {
		cnt := 0;
		foreach ee.vertices vv do {
			if vv.z == 0 then cnt := cnt + 1
			};
		if cnt == 2 then set ee constraint 1
		};
	}

set_e_constraint_11_33 := {
	foreach edge ee do {
		cnt := 0;
		foreach ee.vertices vv do {
			if vv.x == -lx/2 then cnt := cnt - 1;
			if vv.x == lx/2 then cnt := cnt + 1
			};
		if cnt == -2 then set ee constraint 11;
		if cnt == 2 then set ee constraint 33
		};
	}

set_e_constraint_22_44 := {
	foreach edge ee do {
		cnt := 0;
		foreach ee.vertices vv do {
			if vv.y == -ly/2 then cnt := cnt - 1;
			if vv.y == ly/2 then cnt := cnt + 1
			};
		if cnt == -2 then set ee constraint 22;
		if cnt == 2 then set ee constraint 44
		};
	}

set_f_tension_resist := {foreach facet ff do {set ff tension TENS_r}}

set_f_tension_surface := {
	foreach facet ff do {
		cnt := 0;
		foreach ff.vertices vv do {
			if vv.z == 0 then cnt := cnt + 1
			};
		if cnt == 3 then set ff tension TENS_s
		}
	}

set_f_tension_mirror := {
	foreach facet ff do {
		cnt := 0;
		foreach ff.vertices vv do {
			if vv.x == -lx/2 then cnt := cnt - 1;
			if vv.x == lx/2 then cnt := cnt + 1
			};
		if abs(cnt) == 3 then set ff tension TENS_m;
		};
	foreach facet ff do {
		cnt := 0;
		foreach ff.vertices vv do {
			if vv.y == -ly/2 then cnt := cnt - 1;
			if vv.y == ly/2 then cnt := cnt + 1
			};
		if abs(cnt) == 3 then set ff tension TENS_m;
		}
	}

color_TENS_m_faces := {set facet color brown where tension == TENS_m}

color_TENS_s_faces := {set facet color cyan where tension == TENS_s}

color_TENS_r_faces := {set facet color yellow where tension == TENS_r}

prepare_surface := {
	set_v_constraint_1;
	set_v_constraints_11_33;
	set_v_constraints_22_44;
	set_e_constraint_1;
	set_e_constraint_11_33;
	set_e_constraint_22_44;
	set_f_tension_resist;
	set_f_tension_surface;
	set_f_tension_mirror;
	color_TENS_m_faces;
	color_TENS_s_faces;
	color_TENS_r_faces;
	area_normalization;
	defmob_1
	}

loopit := {g50; w 0.001; w 0.001; V}

save2 := {
	foreach vertex do {
		if x < 0.5 then if x > -0.5 then printf "%f %f %f\n", x, y, z >>> "vlist.txt";
		}
	}

loopit_do_talogo := {while total_time < 1 do loopit; save2}


